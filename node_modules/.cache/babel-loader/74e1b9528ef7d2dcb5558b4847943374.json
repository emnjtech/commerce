{"ast":null,"code":"import _objectSpread from\"/Users/admin/ReactProjects/reactProject/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/admin/ReactProjects/reactProject/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{ADD_T0_CART,DEC_QTY,EMPTY_CART,INC_QTY,REMOVE_FROM_CART}from\"./commerce-action\";export var commerceReducer=function commerceReducer(state,action){switch(action.type){case ADD_T0_CART:var itemExists=state.basket.find(function(item){return item.id===action.payload.id;}// && item.size === action.payload.size\n);var newItem;if(!itemExists){newItem=[].concat(_toConsumableArray(state.basket),[action.payload]);// ...state, basket:  [...state.basket, action.payload] \n}else{newItem=state.basket.map(function(item){return item.id===action.payload.id?_objectSpread(_objectSpread({},item),{},{qty:item.qty+1}):_objectSpread({},item);});}return _objectSpread(_objectSpread({},state),{},{basket:newItem});case REMOVE_FROM_CART:var index=state.basket.findIndex(function(basketItem){return basketItem.id===action.payload;});var newBasket=_toConsumableArray(state.basket);if(index>=0){newBasket.splice(index,1);}else{console.warn(\"Can't remove product(id: \".concat(action.payload,\") as its not in the basket!\"));}return _objectSpread(_objectSpread({},state),{},{basket:newBasket});/*     return {\n                ...state,\n                basket: state.basket.filter( item => item.id !== action.payload)\n            } */case INC_QTY:return _objectSpread(_objectSpread({},state),{},{basket:state.basket.map(function(item){return item.id===action.payload?_objectSpread(_objectSpread({},item),{},{qty:item.qty+1}):_objectSpread({},item);})});case DEC_QTY:return _objectSpread(_objectSpread({},state),{},{basket:state.basket.map(function(item){return item.id===action.payload?_objectSpread(_objectSpread({},item),{},{qty:item.qty-1}):_objectSpread({},item);})});case EMPTY_CART:return _objectSpread(_objectSpread({},state),{},{basket:[]});default:return state;}};/* \n            let newBasket = [...state.basket]\n\n            if (index > 0) {\n                newBasket.splice(index,1)\n \n            }\n            else {\n                alert(\"can't remove product\")\n            } \n            \n            \n             ...state,\n                basket: state.basket.filter(item => item.id !== action.payload)*/","map":{"version":3,"sources":["/Users/admin/ReactProjects/reactProject/my-app/src/context/commerce-reducer.js"],"names":["ADD_T0_CART","DEC_QTY","EMPTY_CART","INC_QTY","REMOVE_FROM_CART","commerceReducer","state","action","type","itemExists","basket","find","item","id","payload","newItem","map","qty","index","findIndex","basketItem","newBasket","splice","console","warn"],"mappings":"+QAAA,OAASA,WAAT,CAAsBC,OAAtB,CAA+BC,UAA/B,CAA2CC,OAA3C,CAAoDC,gBAApD,KAA4E,mBAA5E,CAEA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAOC,MAAP,CAAkB,CAC7C,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKR,CAAAA,WAAL,CACI,GAAMS,CAAAA,UAAU,CAAGH,KAAK,CAACI,MAAN,CAAaC,IAAb,CACf,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,EAAL,GAAYN,MAAM,CAACO,OAAP,CAAeD,EAArC,EAAwC;AADzB,CAAnB,CAIA,GAAIE,CAAAA,OAAJ,CACA,GAAI,CAACN,UAAL,CAAgB,CAEXM,OAAO,8BAAOT,KAAK,CAACI,MAAb,GAAqBH,MAAM,CAACO,OAA5B,EAAP,CAA6C;AAEjD,CAJD,IAKK,CAECC,OAAO,CAAGT,KAAK,CAACI,MAAN,CAAaM,GAAb,CAAiB,SAAAJ,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAYN,MAAM,CAACO,OAAP,CAAeD,EAA3B,gCAAqCD,IAArC,MAA2CK,GAAG,CAAEL,IAAI,CAACK,GAAL,CAAW,CAA3D,oBAAsEL,IAAtE,CAAJ,EAArB,CAAV,CAEL,CACD,sCACON,KADP,MAEII,MAAM,CAACK,OAFX,GAKJ,IAAKX,CAAAA,gBAAL,CACI,GAAMc,CAAAA,KAAK,CAAGZ,KAAK,CAACI,MAAN,CAAaS,SAAb,CACV,SAACC,UAAD,QAAgBA,CAAAA,UAAU,CAACP,EAAX,GAAkBN,MAAM,CAACO,OAAzC,EADU,CAAd,CAIA,GAAIO,CAAAA,SAAS,oBAAOf,KAAK,CAACI,MAAb,CAAb,CAEA,GAAIQ,KAAK,EAAI,CAAb,CAAgB,CACZG,SAAS,CAACC,MAAV,CAAiBJ,KAAjB,CAAwB,CAAxB,EACH,CAFD,IAEO,CACHK,OAAO,CAACC,IAAR,oCACgCjB,MAAM,CAACO,OADvC,iCAGH,CAED,sCACOR,KADP,MAEII,MAAM,CAAEW,SAFZ,GAML;AACP;AACA;AACA,gBAEQ,IAAKlB,CAAAA,OAAL,CACI,sCACOG,KADP,MAEII,MAAM,CAAEJ,KAAK,CAACI,MAAN,CAAaM,GAAb,CAAiB,SAAAJ,IAAI,QAAKA,CAAAA,IAAI,CAACC,EAAL,GAAYN,MAAM,CAACO,OAAnB,gCAAgCF,IAAhC,MAAsCK,GAAG,CAAEL,IAAI,CAACK,GAAL,CAAW,CAAtD,oBAA+DL,IAA/D,CAAL,EAArB,CAFZ,GAIJ,IAAKX,CAAAA,OAAL,CACI,sCACOK,KADP,MAEII,MAAM,CAAEJ,KAAK,CAACI,MAAN,CAAaM,GAAb,CAAiB,SAAAJ,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAYN,MAAM,CAACO,OAAnB,gCAAkCF,IAAlC,MAAwCK,GAAG,CAAEL,IAAI,CAACK,GAAL,CAAW,CAAxD,oBAAmEL,IAAnE,CAAJ,EAArB,CAFZ,GAIJ,IAAKV,CAAAA,UAAL,CACI,sCACOI,KADP,MAEII,MAAM,CAAE,EAFZ,GAMJ,QACI,MAAOJ,CAAAA,KAAP,CAlER,CAqEH,CAtEM,CAwEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { ADD_T0_CART, DEC_QTY, EMPTY_CART, INC_QTY, REMOVE_FROM_CART,} from \"./commerce-action\";\n\nexport const commerceReducer = (state,action) => {\n    switch (action.type) {\n        case ADD_T0_CART:\n            const itemExists = state.basket.find(\n                (item) => item.id === action.payload.id // && item.size === action.payload.size\n            )\n           \n            let newItem \n            if (!itemExists){\n                \n                 newItem = [...state.basket, action.payload]  // ...state, basket:  [...state.basket, action.payload] \n                \n            }\n            else {\n               \n                  newItem = state.basket.map(item => item.id === action.payload.id ? { ...item, qty: item.qty + 1 } : { ...item })\n                \n            }\n            return {\n                ...state,\n                basket:newItem\n            }\n         \n        case REMOVE_FROM_CART:\n            const index = state.basket.findIndex(\n                (basketItem) => basketItem.id === action.payload\n            );\n\n            let newBasket = [...state.basket];\n\n            if (index >= 0) {\n                newBasket.splice(index, 1);\n            } else {\n                console.warn(\n                    `Can't remove product(id: ${action.payload}) as its not in the basket!`\n                )\n            }\n\n            return {\n                ...state,\n                basket: newBasket\n            }\n\n            \n       /*     return {\n                ...state,\n                basket: state.basket.filter( item => item.id !== action.payload)\n            } */\n            \n        case INC_QTY:\n            return {\n                ...state,\n                basket: state.basket.map(item =>  item.id === action.payload? {...item, qty: item.qty + 1} : {...item} )\n            }\n        case DEC_QTY:\n            return {\n                ...state,\n                basket: state.basket.map(item => item.id === action.payload ? { ...item, qty: item.qty - 1 } : { ...item })\n            }\n        case EMPTY_CART:\n            return {\n                ...state,\n                basket: []\n                 \n            }\n\n        default:\n            return state\n    }\n\n}\n\n/* \n            let newBasket = [...state.basket]\n\n            if (index > 0) {\n                newBasket.splice(index,1)\n \n            }\n            else {\n                alert(\"can't remove product\")\n            } \n            \n            \n             ...state,\n                basket: state.basket.filter(item => item.id !== action.payload)*/"]},"metadata":{},"sourceType":"module"}